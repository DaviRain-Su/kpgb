<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to build an agent - Anonymous IPFS Blog</title>
    
    <!-- Primary Meta Tags -->
    <meta name="title" content="How to build an agent - Anonymous IPFS Blog">
    <meta name="description" content="Thorsten Ballï¼Œ2025å¹´4æœˆ15æ—¥ æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä»£ç ç¼–è¾‘ä»£ç†ç¨‹åºå…¶å®å¹¶ä¸éš¾ã€‚ çœ‹èµ·æ¥åº”è¯¥å¾ˆéš¾ã€‚å½“ä½ çœ‹åˆ°ä¸€ä¸ªä»£ç†ç¨‹åºåœ¨ç¼–è¾‘æ–‡ä»¶ã€è¿è¡Œå‘½ä»¤ã€ä»é”™è¯¯ä¸­è„±èº«ã€å°è¯•ä¸åŒç­–ç•¥æ—¶â€”â€”ä¼¼ä¹èƒŒåä¸€å®šæœ‰ä»€ä¹ˆç§˜å¯†ã€‚ ä½†å…¶å®æ²¡æœ‰ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªLLMã€ä¸€ä¸ªå¾ªç¯ï¼Œä»¥åŠè¶³å¤Ÿçš„tokenã€‚è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ æ’­å®¢ ä¸­ä»ä¸€å¼€å§‹å°±åœ¨è¯´çš„ã€‚å…¶ä½™â€¦">
    <meta name="keywords" content="agent, go, IPFS, blog, decentralized, Anonymous">
    <meta name="author" content="DaviRain-Su">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Chinese">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https:&#x2F;&#x2F;Anonymous.github.io&#x2F;kpgb/posts/how-to-build-an-agent.html">
    <meta property="og:title" content="How to build an agent - Anonymous IPFS Blog">
    <meta property="og:description" content="Thorsten Ballï¼Œ2025å¹´4æœˆ15æ—¥ æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä»£ç ç¼–è¾‘ä»£ç†ç¨‹åºå…¶å®å¹¶ä¸éš¾ã€‚ çœ‹èµ·æ¥åº”è¯¥å¾ˆéš¾ã€‚å½“ä½ çœ‹åˆ°ä¸€ä¸ªä»£ç†ç¨‹åºåœ¨ç¼–è¾‘æ–‡ä»¶ã€è¿è¡Œå‘½ä»¤ã€ä»é”™è¯¯ä¸­è„±èº«ã€å°è¯•ä¸åŒç­–ç•¥æ—¶â€”â€”ä¼¼ä¹èƒŒåä¸€å®šæœ‰ä»€ä¹ˆç§˜å¯†ã€‚ ä½†å…¶å®æ²¡æœ‰ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªLLMã€ä¸€ä¸ªå¾ªç¯ï¼Œä»¥åŠè¶³å¤Ÿçš„tokenã€‚è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ æ’­å®¢ ä¸­ä»ä¸€å¼€å§‹å°±åœ¨è¯´çš„ã€‚å…¶ä½™â€¦">
    <meta property="og:image" content="https:&#x2F;&#x2F;Anonymous.github.io&#x2F;kpgb/images/og-default.svg">
    <meta property="og:site_name" content="Anonymous IPFS Blog">
    
    <meta property="article:published_time" content="2025-07-21T10:16:15+0000">
    <meta property="article:modified_time" content="2025-07-21T10:16:35+0000">
    <meta property="article:author" content="DaviRain-Su">
    
    <meta property="article:tag" content="agent">
    
    <meta property="article:tag" content="go">
    
    
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https:&#x2F;&#x2F;Anonymous.github.io&#x2F;kpgb/posts/how-to-build-an-agent.html">
    <meta property="twitter:title" content="How to build an agent - Anonymous IPFS Blog">
    <meta property="twitter:description" content="Thorsten Ballï¼Œ2025å¹´4æœˆ15æ—¥ æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä»£ç ç¼–è¾‘ä»£ç†ç¨‹åºå…¶å®å¹¶ä¸éš¾ã€‚ çœ‹èµ·æ¥åº”è¯¥å¾ˆéš¾ã€‚å½“ä½ çœ‹åˆ°ä¸€ä¸ªä»£ç†ç¨‹åºåœ¨ç¼–è¾‘æ–‡ä»¶ã€è¿è¡Œå‘½ä»¤ã€ä»é”™è¯¯ä¸­è„±èº«ã€å°è¯•ä¸åŒç­–ç•¥æ—¶â€”â€”ä¼¼ä¹èƒŒåä¸€å®šæœ‰ä»€ä¹ˆç§˜å¯†ã€‚ ä½†å…¶å®æ²¡æœ‰ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªLLMã€ä¸€ä¸ªå¾ªç¯ï¼Œä»¥åŠè¶³å¤Ÿçš„tokenã€‚è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ æ’­å®¢ ä¸­ä»ä¸€å¼€å§‹å°±åœ¨è¯´çš„ã€‚å…¶ä½™â€¦">
    <meta property="twitter:image" content="https:&#x2F;&#x2F;Anonymous.github.io&#x2F;kpgb/images/twitter-card.svg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https:&#x2F;&#x2F;Anonymous.github.io&#x2F;kpgb/posts/how-to-build-an-agent.html">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="&#x2F;kpgb/favicon.svg">
    <link rel="alternate icon" href="&#x2F;kpgb/favicon.ico">
    <link rel="manifest" href="&#x2F;kpgb/site.webmanifest">
    
    <!-- CSS -->
    <link rel="stylesheet" href="&#x2F;kpgb/css/style.css">
    
    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="Anonymous IPFS Blog RSS Feed" href="&#x2F;kpgb/feed.xml">
    
    <!-- JSON-LD Structured Data -->
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "How to build an agent",
        "description": "Thorsten Ballï¼Œ2025å¹´4æœˆ15æ—¥ æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä»£ç ç¼–è¾‘ä»£ç†ç¨‹åºå…¶å®å¹¶ä¸éš¾ã€‚ çœ‹èµ·æ¥åº”è¯¥å¾ˆéš¾ã€‚å½“ä½ çœ‹åˆ°ä¸€ä¸ªä»£ç†ç¨‹åºåœ¨ç¼–è¾‘æ–‡ä»¶ã€è¿è¡Œå‘½ä»¤ã€ä»é”™è¯¯ä¸­è„±èº«ã€å°è¯•ä¸åŒç­–ç•¥æ—¶â€”â€”ä¼¼ä¹èƒŒåä¸€å®šæœ‰ä»€ä¹ˆç§˜å¯†ã€‚ ä½†å…¶å®æ²¡æœ‰ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªLLMã€ä¸€ä¸ªå¾ªç¯ï¼Œä»¥åŠè¶³å¤Ÿçš„tokenã€‚è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ æ’­å®¢ ä¸­ä»ä¸€å¼€å§‹å°±åœ¨è¯´çš„ã€‚å…¶ä½™çš„ï¼Œé‚£äº›è®©Ampå¦‚æ­¤ä»¤äººä¸Šç˜¾å’Œå°è±¡æ·±åˆ»çš„ä¸œè¥¿ï¼Ÿéƒ½æ˜¯è‹¦å·¥ã€‚ ä½†æ˜¯æ„å»ºä¸€ä¸ªå°å·§è€Œåˆä»¤äººå°è±¡æ·±åˆ»çš„ä»£ç†ç¨‹åºç”šè‡³ä¸éœ€è¦é‚£äº›ã€‚ä½ å¯ä»¥ç”¨ä¸åˆ°400è¡Œä»£ç å®Œæˆï¼Œå…¶ä¸­å¤§éƒ¨åˆ†è¿˜æ˜¯æ ·æ¿ä»£ç ã€‚ æˆ‘ç°åœ¨å°±è¦å‘ä½ å±•ç¤ºå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬å°†ä¸€èµ·ç¼–å†™ä¸€äº›ä»£ç ï¼Œä»é›¶è¡Œä»£ç å¼€å§‹ï¼Œåˆ°&amp;quot;å“‡ï¼Œè¿™æ˜¯...æ¸¸æˆæ”¹å˜è€…&amp;quot;ã€‚ æˆ‘å¼ºçƒˆå»ºè®®ä½ è·Ÿç€åšã€‚ä¸ï¼ŒçœŸçš„ã€‚ä½ å¯èƒ½ä¼šè§‰å¾—åªæ˜¯è¯»ä¸€éå°±å¤Ÿäº†ï¼Œä¸ç”¨çœŸçš„æ•²ä»£ç ï¼Œä½†è¿™ä¸åˆ°400è¡Œä»£ç ã€‚æˆ‘éœ€è¦ä½ æ„Ÿå—ä¸€ä¸‹ä»£ç é‡æœ‰å¤šå°‘ï¼Œæˆ‘å¸Œæœ›ä½ åœ¨è‡ªå·±çš„ç»ˆç«¯ã€è‡ªå·±çš„æ–‡ä»¶å¤¹é‡Œäº²çœ¼çœ‹åˆ°è¿™ä¸€åˆ‡ã€‚ æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ï¼š Go Anthropic APIå¯†é’¥ ï¼Œè®¾ç½®ä¸ºç¯å¢ƒå˜é‡ å‡†å¤‡å¥½é“…ç¬”ï¼ è®©æˆ‘ä»¬ç›´æ¥å¼€å§‹ï¼Œç”¨å››ä¸ªç®€å•å‘½ä»¤å»ºç«‹ä¸€ä¸ªæ–°çš„Goé¡¹ç›®ï¼š ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ‰“å¼€ ï¼Œä½œä¸ºç¬¬ä¸€æ­¥ï¼Œæ”¾å…¥æˆ‘ä»¬éœ€è¦çš„åŸºæœ¬æ¡†æ¶ï¼š æ˜¯çš„ï¼Œè¿™è¿˜ä¸èƒ½ç¼–è¯‘ã€‚ä½†æˆ‘ä»¬è¿™é‡Œæœ‰çš„æ˜¯ä¸€ä¸ª ï¼Œå®ƒå¯ä»¥è®¿é—® ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¼šå¯»æ‰¾ ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä»ç»ˆç«¯çš„stdinè¯»å–æ¥è·å–ç”¨æˆ·æ¶ˆæ¯ã€‚ ç°åœ¨è®©æˆ‘ä»¬æ·»åŠ ç¼ºå¤±çš„ æ–¹æ³•ï¼š...",
        "author": {
            "@type": "Person",
            "name": "DaviRain-Su"
        },
        "datePublished": "2025-07-21T10:16:15+0000",
        "dateModified": "2025-07-21T10:16:35+0000",
        "publisher": {
            "@type": "Organization",
            "name": "Anonymous IPFS Blog",
            "logo": {
                "@type": "ImageObject",
                "url": "https:&#x2F;&#x2F;Anonymous.github.io&#x2F;kpgb/images/logo.svg"
            }
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:&#x2F;&#x2F;Anonymous.github.io&#x2F;kpgb/posts/how-to-build-an-agent.html"
        },
        "wordCount": "1276",
        "keywords": "agent, go",
        
        "articleSection": "Development",
        
        "inLanguage": "zh-CN"
    }
    </script>
    
</head>
<body>
    <header>
        <nav>
            <div class="container">
                <h1><a href="&#x2F;kpgb/">Anonymous IPFS Blog</a></h1>
                <ul>
                    <li><a href="&#x2F;kpgb/">Home</a></li>
                    <li><a href="&#x2F;kpgb/archive">Archive</a></li>
                    <li><a href="&#x2F;kpgb/tags">Tags</a></li>
                    <li><a href="&#x2F;kpgb/docs">Docs</a></li>
                    <li><a href="&#x2F;kpgb/feed.xml">RSS</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <div class="container">
            
<article class="post">
    <header>
        <h1>How to build an agent</h1>
        <div class="post-meta">
            <span class="author">By DaviRain-Su</span>
            <span class="date">2025-07-21 10:16</span>
            
            <span class="reading-time">â±ï¸ 23 min read</span>
            
            
            <span class="category">Development</span>
            
        </div>
        
        <div class="tags">
            
            <a href="&#x2F;kpgb/tags/agent" class="tag">agent</a>
            
            <a href="&#x2F;kpgb/tags/go" class="tag">go</a>
            
        </div>
        
    </header>

    <div class="post-content">
        <h1>å¦‚ä½•æ„å»ºä¸€ä¸ªä»£ç†ç¨‹åº</h1>
<h2>æˆ–è€…ï¼šçš‡å¸çš„æ–°è¡£</h2>
<p><strong>Thorsten Ballï¼Œ2025å¹´4æœˆ15æ—¥</strong></p>
<p>æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä»£ç ç¼–è¾‘ä»£ç†ç¨‹åºå…¶å®å¹¶ä¸éš¾ã€‚</p>
<p>çœ‹èµ·æ¥åº”è¯¥å¾ˆéš¾ã€‚å½“ä½ çœ‹åˆ°ä¸€ä¸ªä»£ç†ç¨‹åºåœ¨ç¼–è¾‘æ–‡ä»¶ã€è¿è¡Œå‘½ä»¤ã€ä»é”™è¯¯ä¸­è„±èº«ã€å°è¯•ä¸åŒç­–ç•¥æ—¶â€”â€”ä¼¼ä¹èƒŒåä¸€å®šæœ‰ä»€ä¹ˆç§˜å¯†ã€‚</p>
<p>ä½†å…¶å®æ²¡æœ‰ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªLLMã€ä¸€ä¸ªå¾ªç¯ï¼Œä»¥åŠè¶³å¤Ÿçš„tokenã€‚è¿™å°±æ˜¯æˆ‘ä»¬åœ¨<a href="/podcast">æ’­å®¢</a>ä¸­ä»ä¸€å¼€å§‹å°±åœ¨è¯´çš„ã€‚å…¶ä½™çš„ï¼Œé‚£äº›è®©Ampå¦‚æ­¤ä»¤äººä¸Šç˜¾å’Œå°è±¡æ·±åˆ»çš„ä¸œè¥¿ï¼Ÿéƒ½æ˜¯è‹¦å·¥ã€‚</p>
<p>ä½†æ˜¯æ„å»ºä¸€ä¸ªå°å·§è€Œåˆä»¤äººå°è±¡æ·±åˆ»çš„ä»£ç†ç¨‹åºç”šè‡³ä¸éœ€è¦é‚£äº›ã€‚ä½ å¯ä»¥ç”¨ä¸åˆ°400è¡Œä»£ç å®Œæˆï¼Œå…¶ä¸­å¤§éƒ¨åˆ†è¿˜æ˜¯æ ·æ¿ä»£ç ã€‚</p>
<p>æˆ‘ç°åœ¨å°±è¦å‘ä½ å±•ç¤ºå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬å°†ä¸€èµ·ç¼–å†™ä¸€äº›ä»£ç ï¼Œä»é›¶è¡Œä»£ç å¼€å§‹ï¼Œåˆ°â€œå“‡ï¼Œè¿™æ˜¯â€¦æ¸¸æˆæ”¹å˜è€…â€œã€‚</p>
<p>æˆ‘å¼ºçƒˆå»ºè®®ä½ è·Ÿç€åšã€‚ä¸ï¼ŒçœŸçš„ã€‚ä½ å¯èƒ½ä¼šè§‰å¾—åªæ˜¯è¯»ä¸€éå°±å¤Ÿäº†ï¼Œä¸ç”¨çœŸçš„æ•²ä»£ç ï¼Œä½†è¿™ä¸åˆ°400è¡Œä»£ç ã€‚æˆ‘éœ€è¦ä½ æ„Ÿå—ä¸€ä¸‹ä»£ç é‡æœ‰å¤šå°‘ï¼Œæˆ‘å¸Œæœ›ä½ åœ¨è‡ªå·±çš„ç»ˆç«¯ã€è‡ªå·±çš„æ–‡ä»¶å¤¹é‡Œäº²çœ¼çœ‹åˆ°è¿™ä¸€åˆ‡ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ï¼š</p>
<ul>
<li><a href="https://go.dev/">Go</a></li>
<li><a href="https://console.anthropic.com/settings/keys">Anthropic APIå¯†é’¥</a>ï¼Œè®¾ç½®ä¸ºç¯å¢ƒå˜é‡<code>ANTHROPIC_API_KEY</code></li>
</ul>
<p>å‡†å¤‡å¥½é“…ç¬”ï¼</p>
<p>è®©æˆ‘ä»¬ç›´æ¥å¼€å§‹ï¼Œç”¨å››ä¸ªç®€å•å‘½ä»¤å»ºç«‹ä¸€ä¸ªæ–°çš„Goé¡¹ç›®ï¼š</p>
<pre><code class="language-bash">mkdir code-editing-agent
cd code-editing-agent
go mod init agent
touch main.go
</code></pre>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ‰“å¼€<code>main.go</code>ï¼Œä½œä¸ºç¬¬ä¸€æ­¥ï¼Œæ”¾å…¥æˆ‘ä»¬éœ€è¦çš„åŸºæœ¬æ¡†æ¶ï¼š</p>
<pre><code class="language-go">package main

import (
    "bufio"
    "context"
    "fmt"
    "os"
    "github.com/anthropics/anthropic-sdk-go"
)

func main() {
    client := anthropic.NewClient()
    scanner := bufio.NewScanner(os.Stdin)

    getUserMessage := func() (string, bool) {
        if !scanner.Scan() {
            return "", false
        }
        return scanner.Text(), true
    }

    agent := NewAgent(&amp;client, getUserMessage)
    err := agent.Run(context.TODO())
    if err != nil {
        fmt.Printf("Error: %s\n", err.Error())
    }
}

func NewAgent(client *anthropic.Client, getUserMessage func() (string, bool)) *Agent {
    return &amp;Agent{
        client: client,
        getUserMessage: getUserMessage,
    }
}

type Agent struct {
    client *anthropic.Client
    getUserMessage func() (string, bool)
}
</code></pre>
<p>æ˜¯çš„ï¼Œè¿™è¿˜ä¸èƒ½ç¼–è¯‘ã€‚ä½†æˆ‘ä»¬è¿™é‡Œæœ‰çš„æ˜¯ä¸€ä¸ª<code>Agent</code>ï¼Œå®ƒå¯ä»¥è®¿é—®<code>anthropic.Client</code>ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¼šå¯»æ‰¾<code>ANTHROPIC_API_KEY</code>ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä»ç»ˆç«¯çš„stdinè¯»å–æ¥è·å–ç”¨æˆ·æ¶ˆæ¯ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬æ·»åŠ ç¼ºå¤±çš„<code>Run()</code>æ–¹æ³•ï¼š</p>
<pre><code class="language-go">// main.go
func (a *Agent) Run(ctx context.Context) error {
    conversation := []anthropic.MessageParam{}
    fmt.Println("ä¸ClaudeèŠå¤©ï¼ˆä½¿ç”¨'ctrl-c'é€€å‡ºï¼‰")

    for {
        fmt.Print("\u001b[94mä½ \u001b[0m: ")
        userInput, ok := a.getUserMessage()
        if !ok {
            break
        }

        userMessage := anthropic.NewUserMessage(anthropic.NewTextBlock(userInput))
        conversation = append(conversation, userMessage)

        message, err := a.runInference(ctx, conversation)
        if err != nil {
            return err
        }

        conversation = append(conversation, message.ToParam())

        for _, content := range message.Content {
            switch content.Type {
            case "text":
                fmt.Printf("\u001b[93mClaude\u001b[0m: %s\n", content.Text)
            }
        }
    }

    return nil
}

func (a *Agent) runInference(ctx context.Context, conversation []anthropic.MessageParam) (*anthropic.Message, error) {
    message, err := a.client.Messages.New(ctx, anthropic.MessageNewParams{
        Model: anthropic.ModelClaude3_7SonnetLatest,
        MaxTokens: int64(1024),
        Messages: conversation,
    })
    return message, err
}
</code></pre>
<p>ä»£ç ä¸å¤šï¼Œå¯¹å§ï¼Ÿ90è¡Œï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯<code>Run()</code>ä¸­çš„è¿™ä¸ªå¾ªç¯ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä¸Claudeå¯¹è¯ã€‚ä½†è¿™å·²ç»æ˜¯è¿™ä¸ªç¨‹åºçš„å¿ƒè·³äº†ã€‚</p>
<p>å¯¹äºä¸€ä¸ªå¿ƒè·³æ¥è¯´ï¼Œå®ƒéå¸¸ç›´æ¥ï¼šæˆ‘ä»¬é¦–å…ˆæ‰“å°ä¸€ä¸ªæç¤ºï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥å†…å®¹ï¼Œå°†å…¶æ·»åŠ åˆ°å¯¹è¯ä¸­ï¼Œå‘é€ç»™Claudeï¼Œå°†Claudeçš„å“åº”æ·»åŠ åˆ°å¯¹è¯ä¸­ï¼Œæ‰“å°å“åº”ï¼Œç„¶åå¾ªç¯ç»§ç»­ã€‚</p>
<p>è¿™å°±æ˜¯ä½ ä½¿ç”¨è¿‡çš„æ¯ä¸€ä¸ªAIèŠå¤©åº”ç”¨ç¨‹åºï¼Œåªä¸è¿‡æ˜¯åœ¨ç»ˆç«¯ä¸­ã€‚</p>
<p>è®©æˆ‘ä»¬è¿è¡Œå®ƒï¼š</p>
<pre><code class="language-bash">export ANTHROPIC_API_KEY="è¿™æ˜¯æˆ‘æœ€åä¸€æ¬¡å‘Šè¯‰ä½ è¦è®¾ç½®è¿™ä¸ª"
# ä¸‹è½½ä¾èµ–
go mod tidy
# è¿è¡Œ
go run main.go
</code></pre>
<p>ç„¶åä½ å°±å¯ä»¥å’ŒClaudeèŠå¤©äº†ï¼Œåƒè¿™æ ·ï¼š</p>
<p>æ³¨æ„æˆ‘ä»¬å¦‚ä½•åœ¨å¤šè½®å¯¹è¯ä¸­ä¿æŒåŒä¸€ä¸ªå¯¹è¯ã€‚å®ƒè®°ä½äº†æˆ‘åœ¨ç¬¬ä¸€æ¡æ¶ˆæ¯ä¸­çš„åå­—ã€‚<code>conversation</code>åœ¨æ¯ä¸€è½®ä¸­éƒ½ä¼šå˜é•¿ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½å‘é€æ•´ä¸ªå¯¹è¯ã€‚æœåŠ¡å™¨â€”â€”Anthropicçš„æœåŠ¡å™¨â€”â€”æ˜¯æ— çŠ¶æ€çš„ã€‚å®ƒåªèƒ½çœ‹åˆ°<code>conversation</code>åˆ‡ç‰‡ä¸­çš„å†…å®¹ã€‚ç»´æŠ¤çŠ¶æ€æ˜¯æˆ‘ä»¬çš„è´£ä»»ã€‚</p>
<p>å¥½çš„ï¼Œè®©æˆ‘ä»¬ç»§ç»­ï¼Œå› ä¸ºæ˜µç§°å¾ˆç³Ÿç³•ï¼Œè€Œä¸”è¿™è¿˜ä¸æ˜¯ä¸€ä¸ªä»£ç†ç¨‹åºã€‚ä»€ä¹ˆæ˜¯ä»£ç†ç¨‹åºï¼Ÿè¿™æ˜¯<a href="https://youtu.be/J1-W9O3n7j8?t=72">æˆ‘çš„å®šä¹‰</a>ï¼šä¸€ä¸ªå¯ä»¥è®¿é—®å·¥å…·çš„LLMï¼Œè®©å®ƒå…·æœ‰ä¿®æ”¹ä¸Šä¸‹æ–‡çª—å£ä¹‹å¤–å†…å®¹çš„èƒ½åŠ›ã€‚</p>
<h2>ç¬¬ä¸€ä¸ªå·¥å…·</h2>
<p>å…·æœ‰å·¥å…·è®¿é—®æƒé™çš„LLMï¼Ÿä»€ä¹ˆæ˜¯å·¥å…·ï¼ŸåŸºæœ¬æ€æƒ³æ˜¯è¿™æ ·çš„ï¼šä½ å‘æ¨¡å‹å‘é€ä¸€ä¸ªæç¤ºï¼Œè¯´å¦‚æœå®ƒæƒ³ä½¿ç”¨â€œå·¥å…·â€œï¼Œåº”è¯¥ä»¥æŸç§ç‰¹å®šæ–¹å¼å›å¤ã€‚ç„¶åä½ ï¼Œä½œä¸ºæ¶ˆæ¯çš„æ¥æ”¶è€…ï¼Œé€šè¿‡æ‰§è¡Œå·¥å…·æ¥â€œä½¿ç”¨å·¥å…·â€œå¹¶å›å¤ç»“æœã€‚å°±æ˜¯è¿™æ ·ã€‚æˆ‘ä»¬å°†çœ‹åˆ°çš„å…¶ä»–ä¸€åˆ‡éƒ½åªæ˜¯åœ¨æ­¤åŸºç¡€ä¸Šçš„æŠ½è±¡ã€‚</p>
<p>æƒ³è±¡ä½ æ­£åœ¨å’Œæœ‹å‹äº¤è°ˆï¼Œä½ å‘Šè¯‰ä»–ä»¬ï¼šâ€œåœ¨æ¥ä¸‹æ¥çš„å¯¹è¯ä¸­ï¼Œå¦‚æœä½ æƒ³è®©æˆ‘ä¸¾èµ·æ‰‹è‡‚ï¼Œå°±çœ¨çœ¼ç›â€ã€‚è¯´å‡ºæ¥å¾ˆå¥‡æ€ªï¼Œä½†è¿™æ˜¯ä¸€ä¸ªå®¹æ˜“ç†è§£çš„æ¦‚å¿µã€‚</p>
<p>æˆ‘ä»¬å·²ç»å¯ä»¥åœ¨ä¸æ”¹å˜ä»»ä½•ä»£ç çš„æƒ…å†µä¸‹å°è¯•å®ƒäº†ã€‚</p>
<p>æˆ‘ä»¬å‘Šè¯‰Claudeï¼Œå½“å®ƒæƒ³äº†è§£å¤©æ°”æ—¶ï¼Œç”¨<code>get_weather</code>çœ¨çœ¼ã€‚ä¸‹ä¸€æ­¥æ˜¯ä¸¾èµ·æˆ‘ä»¬çš„æ‰‹è‡‚å¹¶å›å¤â€œå·¥å…·çš„ç»“æœâ€œï¼š</p>
<p>è¿™åœ¨ç¬¬ä¸€æ¬¡å°è¯•æ—¶å°±è¿è¡Œå¾—å¾ˆå¥½ï¼Œä¸æ˜¯å—ï¼Ÿ</p>
<p>è¿™äº›æ¨¡å‹ç»è¿‡è®­ç»ƒå’Œå¾®è°ƒæ¥ä½¿ç”¨â€œå·¥å…·â€œï¼Œå®ƒä»¬éå¸¸æ¸´æœ›è¿™æ ·åšã€‚åˆ°2025å¹´ï¼Œå®ƒä»¬åŸºæœ¬ä¸Šâ€œçŸ¥é“â€œè‡ªå·±ä¸æ˜¯æ— æ‰€ä¸çŸ¥çš„ï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·æ¥è·å–æ›´å¤šä¿¡æ¯ã€‚ï¼ˆå½“ç„¶è¿™å¹¶ä¸æ˜¯å®é™…å‘ç”Ÿçš„æƒ…å†µï¼Œä½†ç°åœ¨è¿™æ˜¯ä¸€ä¸ªè¶³å¤Ÿå¥½çš„è§£é‡Šã€‚ï¼‰</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œå·¥å…·å’Œå·¥å…·ä½¿ç”¨åªæœ‰ä¸¤ä¸ªè¦ç´ ï¼š</p>
<ol>
<li>ä½ å‘Šè¯‰æ¨¡å‹æœ‰å“ªäº›å·¥å…·å¯ç”¨</li>
<li>å½“æ¨¡å‹æƒ³è¦æ‰§è¡Œå·¥å…·æ—¶ï¼Œå®ƒå‘Šè¯‰ä½ ï¼Œä½ æ‰§è¡Œå·¥å…·å¹¶å‘é€å“åº”</li>
</ol>
<p>ä¸ºäº†ä½¿(1)æ›´å®¹æ˜“ï¼Œå¤§å‹æ¨¡å‹æä¾›å•†æ„å»ºäº†å†…ç½®APIæ¥å‘é€å·¥å…·å®šä¹‰ã€‚</p>
<p>å¥½çš„ï¼Œç°åœ¨è®©æˆ‘ä»¬æ„å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå·¥å…·ï¼š<code>read_file</code></p>
<h2><code>read_file</code>å·¥å…·</h2>
<p>ä¸ºäº†å®šä¹‰<code>read_file</code>å·¥å…·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Anthropic SDKå»ºè®®çš„ç±»å‹ï¼Œä½†è¯·è®°ä½ï¼šåœ¨åº•å±‚ï¼Œè¿™éƒ½å°†ä½œä¸ºå­—ç¬¦ä¸²å‘é€ç»™æ¨¡å‹ã€‚è¿™éƒ½æ˜¯â€œå¦‚æœä½ æƒ³è®©æˆ‘ä½¿ç”¨<code>read_file</code>å°±çœ¨çœ¼â€œã€‚</p>
<p>æˆ‘ä»¬è¦æ·»åŠ çš„æ¯ä¸ªå·¥å…·éƒ½éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ä¸€ä¸ªåç§°</li>
<li>ä¸€ä¸ªæè¿°ï¼Œå‘Šè¯‰æ¨¡å‹å·¥å…·çš„ä½œç”¨ã€ä½•æ—¶ä½¿ç”¨ã€ä½•æ—¶ä¸ä½¿ç”¨ã€è¿”å›ä»€ä¹ˆç­‰ç­‰</li>
<li>ä¸€ä¸ªè¾“å…¥æ¨¡å¼ï¼Œä½œä¸ºJSONæ¨¡å¼æè¿°ï¼Œè¯´æ˜è¿™ä¸ªå·¥å…·æœŸæœ›ä»€ä¹ˆè¾“å…¥ä»¥åŠä»¥ä»€ä¹ˆå½¢å¼</li>
<li>ä¸€ä¸ªå®é™…æ‰§è¡Œå·¥å…·çš„å‡½æ•°ï¼Œä½¿ç”¨æ¨¡å‹å‘é€ç»™æˆ‘ä»¬çš„è¾“å…¥å¹¶è¿”å›ç»“æœ</li>
</ul>
<p>æ‰€ä»¥è®©æˆ‘ä»¬å°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬çš„ä»£ç ä¸­ï¼š</p>
<pre><code class="language-go">// main.go
type ToolDefinition struct {
    Name string `json:"name"`
    Description string `json:"description"`
    InputSchema anthropic.ToolInputSchemaParam `json:"input_schema"`
    Function func(input json.RawMessage) (string, error)
}
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬ç»™æˆ‘ä»¬çš„<code>Agent</code>å·¥å…·å®šä¹‰ï¼š</p>
<pre><code class="language-go">// main.go
// `tools`åœ¨è¿™é‡Œæ·»åŠ ï¼š
type Agent struct {
    client *anthropic.Client
    getUserMessage func() (string, bool)
    tools []ToolDefinition
}

// åœ¨è¿™é‡Œï¼š
func NewAgent(
    client *anthropic.Client,
    getUserMessage func() (string, bool),
    tools []ToolDefinition,
) *Agent {
    return &amp;Agent{
        client: client,
        getUserMessage: getUserMessage,
        tools: tools,
    }
}

// åœ¨è¿™é‡Œï¼š
func main() {
    // [... ä¹‹å‰çš„ä»£ç  ...]
    tools := []ToolDefinition{}
    agent := NewAgent(&amp;client, getUserMessage, tools)
    // [... ä¹‹å‰çš„ä»£ç  ...]
}
</code></pre>
<p>å¹¶åœ¨<code>runInference</code>ä¸­å°†å®ƒä»¬å‘é€ç»™æ¨¡å‹ï¼š</p>
<pre><code class="language-go">// main.go
func (a *Agent) runInference(ctx context.Context, conversation []anthropic.MessageParam) (*anthropic.Message, error) {
    anthropicTools := []anthropic.ToolUnionParam{}
    for _, tool := range a.tools {
        anthropicTools = append(anthropicTools, anthropic.ToolUnionParam{
            OfTool: &amp;anthropic.ToolParam{
                Name: tool.Name,
                Description: anthropic.String(tool.Description),
                InputSchema: tool.InputSchema,
            },
        })
    }

    message, err := a.client.Messages.New(ctx, anthropic.MessageNewParams{
        Model: anthropic.ModelClaude3_7SonnetLatest,
        MaxTokens: int64(1024),
        Messages: conversation,
        Tools: anthropicTools,
    })
    return message, err
}
</code></pre>
<p>è¿™é‡Œæœ‰ä¸€äº›ç±»å‹æ“ä½œï¼Œæˆ‘åœ¨Goæ³›å‹æ–¹é¢è¿˜ä¸å¤Ÿç†Ÿç»ƒï¼Œæ‰€ä»¥æˆ‘ä¸ä¼šè¯•å›¾å‘ä½ è§£é‡Š<code>anthropic.String</code>å’Œ<code>ToolUnionParam</code>ã€‚ä½†æ˜¯ï¼ŒçœŸçš„ï¼Œæˆ‘å‘èª“ï¼Œè¿™å¾ˆç®€å•ï¼š</p>
<p>æˆ‘ä»¬å‘é€æˆ‘ä»¬çš„å·¥å…·å®šä¹‰ï¼Œåœ¨æœåŠ¡å™¨ä¸Šï¼ŒAnthropicç„¶åå°†è¿™äº›å®šä¹‰åŒ…è£…åœ¨<a href="https://docs.anthropic.com/en/docs/build-with-claude/tool-use/overview#tool-use-system-prompt">è¿™ä¸ªç³»ç»Ÿæç¤º</a>ä¸­ï¼ˆå†…å®¹ä¸å¤šï¼‰ï¼Œå°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬çš„<code>conversation</code>ä¸­ï¼Œç„¶åå¦‚æœæ¨¡å‹æƒ³ä½¿ç”¨è¯¥å·¥å…·ï¼Œå°±ä¼šä»¥ç‰¹å®šæ–¹å¼å›å¤ã€‚</p>
<p>å¥½çš„ï¼Œå·¥å…·å®šä¹‰æ­£åœ¨å‘é€ï¼Œä½†æˆ‘ä»¬è¿˜æ²¡æœ‰å®šä¹‰å·¥å…·ã€‚è®©æˆ‘ä»¬æ¥åšè¿™ä»¶äº‹å¹¶å®šä¹‰<code>read_file</code>ï¼š</p>
<pre><code class="language-go">// main.go
var ReadFileDefinition = ToolDefinition{
    Name: "read_file",
    Description: "è¯»å–ç»™å®šç›¸å¯¹æ–‡ä»¶è·¯å¾„çš„å†…å®¹ã€‚å½“ä½ æƒ³çœ‹åˆ°æ–‡ä»¶å†…éƒ¨çš„å†…å®¹æ—¶ä½¿ç”¨è¿™ä¸ªã€‚ä¸è¦å¯¹ç›®å½•åä½¿ç”¨è¿™ä¸ªã€‚",
    InputSchema: ReadFileInputSchema,
    Function: ReadFile,
}

type ReadFileInput struct {
    Path string `json:"path" jsonschema_description:"å·¥ä½œç›®å½•ä¸­æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚"`
}

var ReadFileInputSchema = GenerateSchema[ReadFileInput]()

func ReadFile(input json.RawMessage) (string, error) {
    readFileInput := ReadFileInput{}
    err := json.Unmarshal(input, &amp;readFileInput)
    if err != nil {
        panic(err)
    }

    content, err := os.ReadFile(readFileInput.Path)
    if err != nil {
        return "", err
    }

    return string(content), nil
}

func GenerateSchema[T any]() anthropic.ToolInputSchemaParam {
    reflector := jsonschema.Reflector{
        AllowAdditionalProperties: false,
        DoNotReference: true,
    }
    var v T
    schema := reflector.Reflect(v)
    return anthropic.ToolInputSchemaParam{
        Properties: schema.Properties,
    }
}
</code></pre>
<p>ä»£ç ä¸å¤šï¼Œå¯¹å§ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå•ä¸€å‡½æ•°<code>ReadFile</code>ï¼Œä»¥åŠæ¨¡å‹å°†çœ‹åˆ°çš„ä¸¤ä¸ªæè¿°ï¼šæˆ‘ä»¬çš„<code>Description</code>æè¿°å·¥å…·æœ¬èº«ï¼ˆâ€œè¯»å–ç»™å®šç›¸å¯¹æ–‡ä»¶è·¯å¾„çš„å†…å®¹â€¦â€ï¼‰ï¼Œä»¥åŠè¿™ä¸ªå·¥å…·å”¯ä¸€è¾“å…¥å‚æ•°çš„æè¿°ï¼ˆâ€œå·¥ä½œç›®å½•ä¸­æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„â€¦â€ï¼‰ã€‚</p>
<p><code>ReadFileInputSchema</code>å’Œ<code>GenerateSchema</code>è¿™äº›ä¸œè¥¿ï¼Ÿæˆ‘ä»¬éœ€è¦è¿™äº›ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸ºæˆ‘ä»¬å‘é€ç»™æ¨¡å‹çš„å·¥å…·å®šä¹‰ç”ŸæˆJSONæ¨¡å¼ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>jsonschema</code>åŒ…ï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥å’Œä¸‹è½½ï¼š</p>
<pre><code class="language-go">// main.go
package main

import (
    "bufio"
    "context"
    // æ·»åŠ è¿™ä¸ªï¼š
    "encoding/json"
    "fmt"
    "os"
    "github.com/anthropics/anthropic-sdk-go"
    // æ·»åŠ è¿™ä¸ªï¼š
    "github.com/invopop/jsonschema"
)
</code></pre>
<p>ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="language-bash">go mod tidy
</code></pre>
<p>ç„¶åï¼Œåœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿ä½¿ç”¨å®šä¹‰ï¼š</p>
<pre><code class="language-go">func main() {
    // [... ä¹‹å‰çš„ä»£ç  ...]
    tools := []ToolDefinition{ReadFileDefinition}
    // [... ä¹‹å‰çš„ä»£ç  ...]
}
</code></pre>
<p>æ˜¯æ—¶å€™è¯•è¯•äº†ï¼</p>
<p>ç­‰ç­‰ï¼Œä»€ä¹ˆï¼Ÿå“ˆå“ˆå“ˆï¼Œå®ƒæƒ³ä½¿ç”¨å·¥å…·ï¼æ˜¾ç„¶ä½ çš„è¾“å‡ºä¼šç•¥æœ‰ä¸åŒï¼Œä½†Claudeè‚¯å®šå¬èµ·æ¥çŸ¥é“å®ƒå¯ä»¥è¯»å–æ–‡ä»¶ï¼Œå¯¹å§ï¼Ÿ</p>
<p>é—®é¢˜æ˜¯æˆ‘ä»¬æ²¡æœ‰ç›‘å¬ï¼å½“Claudeçœ¨çœ¼æ—¶ï¼Œæˆ‘ä»¬å¿½ç•¥äº†å®ƒã€‚æˆ‘ä»¬éœ€è¦ä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œè®©æˆ‘å±•ç¤ºå¦‚ä½•é€šè¿‡ç”¨ä»¥ä¸‹å†…å®¹æ›¿æ¢æˆ‘ä»¬<code>Agent</code>çš„<code>Run</code>æ–¹æ³•æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š</p>
<pre><code class="language-go">// main.go
func (a *Agent) Run(ctx context.Context) error {
    conversation := []anthropic.MessageParam{}
    fmt.Println("ä¸ClaudeèŠå¤©ï¼ˆä½¿ç”¨'ctrl-c'é€€å‡ºï¼‰")
    readUserInput := true

    for {
        if readUserInput {
            fmt.Print("\u001b[94mä½ \u001b[0m: ")
            userInput, ok := a.getUserMessage()
            if !ok {
                break
            }
            userMessage := anthropic.NewUserMessage(anthropic.NewTextBlock(userInput))
            conversation = append(conversation, userMessage)
        }

        message, err := a.runInference(ctx, conversation)
        if err != nil {
            return err
        }

        conversation = append(conversation, message.ToParam())

        toolResults := []anthropic.ContentBlockParamUnion{}
        for _, content := range message.Content {
            switch content.Type {
            case "text":
                fmt.Printf("\u001b[93mClaude\u001b[0m: %s\n", content.Text)
            case "tool_use":
                result := a.executeTool(content.ID, content.Name, content.Input)
                toolResults = append(toolResults, result)
            }
        }

        if len(toolResults) == 0 {
            readUserInput = true
            continue
        }

        readUserInput = false
        conversation = append(conversation, anthropic.NewUserMessage(toolResults...))
    }

    return nil
}

func (a *Agent) executeTool(id, name string, input json.RawMessage) anthropic.ContentBlockParamUnion {
    var toolDef ToolDefinition
    var found bool
    for _, tool := range a.tools {
        if tool.Name == name {
            toolDef = tool
            found = true
            break
        }
    }

    if !found {
        return anthropic.NewToolResultBlock(id, "tool not found", true)
    }

    fmt.Printf("\u001b[92mtool\u001b[0m: %s(%s)\n", name, input)
    response, err := toolDef.Function(input)
    if err != nil {
        return anthropic.NewToolResultBlock(id, err.Error(), true)
    }

    return anthropic.NewToolResultBlock(id, response, false)
}
</code></pre>
<p>çœ¯ç€çœ¼çœ‹ï¼Œä½ ä¼šå‘ç°90%æ˜¯æ ·æ¿ä»£ç ï¼Œ10%æ˜¯é‡è¦çš„ï¼šå½“æˆ‘ä»¬ä»Claudeé‚£é‡Œå¾—åˆ°ä¸€ä¸ª<code>message</code>æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡æŸ¥æ‰¾<code>content.Type == "tool_use"</code>æ¥æ£€æŸ¥Claudeæ˜¯å¦è¦æ±‚æˆ‘ä»¬æ‰§è¡Œå·¥å…·ï¼Œå¦‚æœæ˜¯ï¼Œæˆ‘ä»¬äº¤ç»™<code>executeTool</code>ï¼Œåœ¨æˆ‘ä»¬çš„æœ¬åœ°æ³¨å†Œè¡¨ä¸­æŒ‰åç§°æŸ¥æ‰¾å·¥å…·ï¼Œè§£ç è¾“å…¥ï¼Œæ‰§è¡Œå®ƒï¼Œè¿”å›ç»“æœã€‚å¦‚æœæ˜¯é”™è¯¯ï¼Œæˆ‘ä»¬ç¿»è½¬ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å°±æ˜¯è¿™æ ·ã€‚</p>
<p>ï¼ˆæ˜¯çš„ï¼Œå¾ªç¯ä¸­æœ‰å¾ªç¯ï¼Œä½†è¿™ä¸é‡è¦ã€‚ï¼‰</p>
<p>æˆ‘ä»¬æ‰§è¡Œå·¥å…·ï¼Œå°†ç»“æœå‘é€å›Claudeï¼Œç„¶åå†æ¬¡è¯·æ±‚Claudeçš„å“åº”ã€‚çœŸçš„ï¼šå°±æ˜¯è¿™æ ·ã€‚è®©æˆ‘å±•ç¤ºç»™ä½ çœ‹ã€‚</p>
<p>å‡†å¤‡å·¥ä½œï¼Œè¿è¡Œè¿™ä¸ªï¼š</p>
<pre><code class="language-bash">echo 'what animal is the most disagreeable because it always says neigh?' &gt;&gt; secret-file.txt
</code></pre>
<p>è¿™åœ¨æˆ‘ä»¬çš„ç›®å½•ä¸­åˆ›å»ºäº†ä¸€ä¸ª<code>secret-file.txt</code>ï¼ŒåŒ…å«ä¸€ä¸ªç¥ç§˜çš„è°œè¯­ã€‚</p>
<p>åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ï¼Œè®©æˆ‘ä»¬è¿è¡Œæˆ‘ä»¬æ–°çš„ä½¿ç”¨å·¥å…·çš„ä»£ç†ç¨‹åºï¼Œå¹¶è¦æ±‚å®ƒæŸ¥çœ‹æ–‡ä»¶ï¼š</p>
<p>è®©æˆ‘ä»¬æ·±å‘¼å¸ï¼Œä¸€èµ·è¯´å‡ºæ¥ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹ï¼šå¤ªæ£’äº†ã€‚ä½ åªæ˜¯ç»™å®ƒä¸€ä¸ªå·¥å…·ï¼Œå®ƒå°±â€¦åœ¨è®¤ä¸ºæœ‰åŠ©äºè§£å†³ä»»åŠ¡æ—¶ä½¿ç”¨å®ƒã€‚è®°ä½ï¼šæˆ‘ä»¬æ²¡æœ‰è¯´ä»»ä½•å…³äºâ€œå¦‚æœç”¨æˆ·è¯¢é—®æ–‡ä»¶ï¼Œå°±è¯»å–æ–‡ä»¶â€œçš„è¯ã€‚æˆ‘ä»¬ä¹Ÿæ²¡æœ‰è¯´â€œå¦‚æœæŸäº›ä¸œè¥¿çœ‹èµ·æ¥åƒæ–‡ä»¶åï¼Œå°±æƒ³åŠæ³•è¯»å–å®ƒâ€œã€‚ä¸ï¼Œè¿™äº›éƒ½æ²¡æœ‰ã€‚æˆ‘ä»¬è¯´â€œå¸®æˆ‘è§£å†³è¿™ä¸ªæ–‡ä»¶ä¸­çš„é—®é¢˜â€œï¼ŒClaudeæ„è¯†åˆ°å®ƒå¯ä»¥è¯»å–æ–‡ä»¶æ¥å›ç­”ï¼Œç„¶åå°±å»åšäº†ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å…·ä½“ä¸€ç‚¹ï¼ŒçœŸæ­£æ¨åŠ¨å®ƒä½¿ç”¨å·¥å…·ï¼Œä½†å®ƒåŸºæœ¬ä¸Šæ˜¯è‡ªå·±å®Œæˆçš„ï¼š</p>
<p>éå¸¸å‡†ç¡®ã€‚å¥½çš„ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“å¦‚ä½•è®©Claudeä½¿ç”¨å·¥å…·ï¼Œè®©æˆ‘ä»¬æ·»åŠ æ›´å¤šå·¥å…·ã€‚</p>
<h2><code>list_files</code>å·¥å…·</h2>
<p>å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œå½“ä½ ç™»å½•åˆ°ä¸€å°æ–°è®¡ç®—æœºæ—¶ï¼Œä½ åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯é€šè¿‡è¿è¡Œ<code>ls</code>æ¥äº†è§£æƒ…å†µâ€”â€”åˆ—å‡ºæ–‡ä»¶ã€‚</p>
<p>è®©æˆ‘ä»¬ç»™ClaudeåŒæ ·çš„èƒ½åŠ›ï¼Œä¸€ä¸ªåˆ—å‡ºæ–‡ä»¶çš„å·¥å…·ã€‚è¿™æ˜¯<code>list_files</code>å·¥å…·çš„å®Œæ•´å®ç°ï¼š</p>
<pre><code class="language-go">// main.go
var ListFilesDefinition = ToolDefinition{
    Name: "list_files",
    Description: "åˆ—å‡ºç»™å®šè·¯å¾„ä¸‹çš„æ–‡ä»¶å’Œç›®å½•ã€‚å¦‚æœæ²¡æœ‰æä¾›è·¯å¾„ï¼Œåˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚",
    InputSchema: ListFilesInputSchema,
    Function: ListFiles,
}

type ListFilesInput struct {
    Path string `json:"path,omitempty" jsonschema_description:"å¯é€‰çš„ç›¸å¯¹è·¯å¾„ï¼Œç”¨äºåˆ—å‡ºæ–‡ä»¶ã€‚å¦‚æœä¸æä¾›ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•ã€‚"`
}

var ListFilesInputSchema = GenerateSchema[ListFilesInput]()

func ListFiles(input json.RawMessage) (string, error) {
    listFilesInput := ListFilesInput{}
    err := json.Unmarshal(input, &amp;listFilesInput)
    if err != nil {
        panic(err)
    }

    dir := "."
    if listFilesInput.Path != "" {
        dir = listFilesInput.Path
    }

    var files []string
    err = filepath.Walk(dir, func(path string, info os.FileInfo, err error) error {
        if err != nil {
            return err
        }
        relPath, err := filepath.Rel(dir, path)
        if err != nil {
            return err
        }
        if relPath != "." {
            if info.IsDir() {
                files = append(files, relPath+"/")
            } else {
                files = append(files, relPath)
            }
        }
        return nil
    })

    if err != nil {
        return "", err
    }

    result, err := json.Marshal(files)
    if err != nil {
        return "", err
    }

    return string(result), nil
}
</code></pre>
<p>è¿™é‡Œæ²¡æœ‰ä»€ä¹ˆèŠ±å“¨çš„ï¼š<code>list_files</code>è¿”å›å½“å‰æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å’Œç›®å½•åˆ—è¡¨ã€‚å¦‚æœè¿™æ˜¯ä¸€ä¸ªä¸¥è‚ƒçš„åŠªåŠ›ï¼Œæˆ‘ä»¬å¯ä»¥ï¼ˆå¹¶ä¸”å¯èƒ½åº”è¯¥ï¼‰åšä¸€åƒç§ä¼˜åŒ–ï¼Œä½†ç”±äºæˆ‘åªæ˜¯æƒ³å‘ä½ å±•ç¤ºå·«å¸ˆå¸½é‡Œæœ‰ä»€ä¹ˆï¼Œè¿™å°±å¤Ÿäº†ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼šæˆ‘ä»¬è¿”å›å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¹¶ç”¨å°¾éšæ–œæ è¡¨ç¤ºç›®å½•ã€‚è¿™ä¸æ˜¯å¿…éœ€çš„ï¼Œè¿™åªæ˜¯æˆ‘åˆšåˆšå†³å®šè¦åšçš„äº‹æƒ…ã€‚æ²¡æœ‰å›ºå®šæ ¼å¼ã€‚åªè¦Claudeèƒ½ç†è§£å°±è¡Œï¼Œè‡³äºå®ƒèƒ½å¦ç†è§£ï¼Œä½ éœ€è¦é€šè¿‡å®éªŒæ¥ç¡®å®šã€‚ä½ ä¹Ÿå¯ä»¥åœ¨æ¯ä¸ªç›®å½•å‰é¢åŠ ä¸Šâ€œdirectory: â€œæˆ–è¿”å›ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªæ ‡é¢˜çš„Markdownæ–‡æ¡£ï¼šâ€œdirectoriesâ€œå’Œâ€œfilesâ€ã€‚æœ‰å¾ˆå¤šé€‰æ‹©ï¼Œä½ é€‰æ‹©å“ªä¸€ä¸ªå–å†³äºClaudeæœ€èƒ½ç†è§£ä»€ä¹ˆã€éœ€è¦å¤šå°‘tokenã€ç”Ÿæˆå’Œè¯»å–çš„é€Ÿåº¦å¦‚ä½•ç­‰ç­‰ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªæƒ³åˆ›å»ºä¸€ä¸ªå°çš„<code>list_files</code>å·¥å…·ï¼Œæœ€ç®€å•çš„é€‰æ‹©è·èƒœã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å‘Šè¯‰Claudeå…³äº<code>list_files</code>ï¼š</p>
<pre><code class="language-go">// main.go
func main() {
    // [... ä¹‹å‰çš„ä»£ç  ...]
    tools := []ToolDefinition{ReadFileDefinition, ListFilesDefinition}
    // [... ä¹‹å‰çš„ä»£ç  ...]
}
</code></pre>
<p>å°±æ˜¯è¿™æ ·ã€‚è®©æˆ‘ä»¬é—®Claudeå®ƒèƒ½åœ¨è¿™ä¸ªç›®å½•ä¸­çœ‹åˆ°ä»€ä¹ˆã€‚</p>
<p>å·¥ä½œäº†ï¼å®ƒå¯ä»¥è¯»å–ç›®å½•ã€‚</p>
<p>ä½†è¿™é‡Œæœ‰ä¸€ä¸ªé‡ç‚¹ï¼šClaudeçŸ¥é“å¦‚ä½•ç»„åˆè¿™äº›å·¥å…·ã€‚æˆ‘ä»¬åªéœ€è¦ä»¥ä¸€ç§æ¿€å‘å®ƒçš„æ–¹å¼æç¤ºå®ƒï¼š</p>
<p>é¦–å…ˆå®ƒä½¿ç”¨äº†<code>list_files</code>ï¼Œç„¶åå®ƒç”¨æˆ‘è¯¢é—®çš„Goç›¸å…³æ–‡ä»¶ä¸¤æ¬¡è°ƒç”¨äº†<code>read_file</code>ã€‚</p>
<p>å°±â€¦å°±åƒæˆ‘ä»¬ä¼šåšçš„ä¸€æ ·ï¼Œå¯¹å§ï¼Ÿæˆ‘çš„æ„æ€æ˜¯ï¼Œåœ¨è¿™é‡Œï¼Œå¦‚æœæˆ‘é—®ä½ æˆ‘ä»¬åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ä»€ä¹ˆç‰ˆæœ¬çš„Goï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿè¿™æ˜¯Claudeä¸ºæˆ‘åšçš„ï¼š</p>
<p>ClaudeæŸ¥çœ‹ç›®å½•ï¼ŒæŸ¥çœ‹<code>go.mod</code>ï¼Œç„¶åç»™å‡ºç­”æ¡ˆã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨å¤§çº¦æœ‰190è¡Œä»£ç ã€‚è®©è¿™ä¸ªæ•°å­—æ·±å…¥äººå¿ƒã€‚ä¸€æ—¦ä½ æ„Ÿå—åˆ°äº†ï¼Œè®©æˆ‘ä»¬æ·»åŠ å¦ä¸€ä¸ªå·¥å…·ã€‚</p>
<h2>è®©å®ƒ<code>edit_file</code></h2>
<p>æˆ‘ä»¬è¦æ·»åŠ çš„æœ€åä¸€ä¸ªå·¥å…·æ˜¯<code>edit_file</code>â€”â€”ä¸€ä¸ªè®©Claudeç¼–è¾‘æ–‡ä»¶çš„å·¥å…·ã€‚</p>
<p>â€œå¤©å“ªâ€ï¼Œä½ ç°åœ¨åœ¨æƒ³ï¼Œâ€œè¿™å°±æ˜¯æ©¡èƒ¶é‡åˆ°è·¯é¢çš„åœ°æ–¹ï¼Œè¿™å°±æ˜¯ä»–ä»å¸½å­é‡Œæ‹‰å‡ºå…”å­çš„åœ°æ–¹ã€‚â€œå¥½å§ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ï¼Œå¥½å—ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬æ–°çš„<code>edit_file</code>å·¥å…·æ·»åŠ ä¸€ä¸ªå®šä¹‰ï¼š</p>
<pre><code class="language-go">// main.go
var EditFileDefinition = ToolDefinition{
    Name: "edit_file",
    Description: `å¯¹æ–‡æœ¬æ–‡ä»¶è¿›è¡Œç¼–è¾‘ã€‚

åœ¨ç»™å®šæ–‡ä»¶ä¸­å°†'old_str'æ›¿æ¢ä¸º'new_str'ã€‚'old_str'å’Œ'new_str'å¿…é¡»å½¼æ­¤ä¸åŒã€‚
å¦‚æœç”¨pathæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºå®ƒã€‚
`,
    InputSchema: EditFileInputSchema,
    Function: EditFile,
}

type EditFileInput struct {
    Path string `json:"path" jsonschema_description:"æ–‡ä»¶çš„è·¯å¾„"`
    OldStr string `json:"old_str" jsonschema_description:"è¦æœç´¢çš„æ–‡æœ¬ - å¿…é¡»å®Œå…¨åŒ¹é…ä¸”åªæœ‰ä¸€ä¸ªå®Œå…¨åŒ¹é…"`
    NewStr string `json:"new_str" jsonschema_description:"ç”¨æ¥æ›¿æ¢old_strçš„æ–‡æœ¬"`
}

var EditFileInputSchema = GenerateSchema[EditFileInput]()
</code></pre>
<p>æ²¡é”™ï¼Œæˆ‘åˆçŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆï¼šâ€œå­—ç¬¦ä¸²æ›¿æ¢æ¥ç¼–è¾‘æ–‡ä»¶ï¼Ÿâ€œClaude 3.7å–œæ¬¢æ›¿æ¢å­—ç¬¦ä¸²ï¼ˆé€šè¿‡å®éªŒä½ ä¼šå‘ç°å®ƒä»¬å–œæ¬¢æˆ–ä¸å–œæ¬¢ä»€ä¹ˆï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†é€šè¿‡å‘Šè¯‰Claudeå®ƒå¯ä»¥é€šè¿‡ç”¨æ–°æ–‡æœ¬æ›¿æ¢ç°æœ‰æ–‡æœ¬æ¥ç¼–è¾‘æ–‡ä»¶æ¥å®ç°<code>edit_file</code>ã€‚</p>
<p>ç°åœ¨è¿™æ˜¯Goä¸­<code>EditFile</code>å‡½æ•°çš„å®ç°ï¼š</p>
<pre><code class="language-go">func EditFile(input json.RawMessage) (string, error) {
    editFileInput := EditFileInput{}
    err := json.Unmarshal(input, &amp;editFileInput)
    if err != nil {
        return "", err
    }

    if editFileInput.Path == "" || editFileInput.OldStr == editFileInput.NewStr {
        return "", fmt.Errorf("invalid input parameters")
    }

    content, err := os.ReadFile(editFileInput.Path)
    if err != nil {
        if os.IsNotExist(err) &amp;&amp; editFileInput.OldStr == "" {
            return createNewFile(editFileInput.Path, editFileInput.NewStr)
        }
        return "", err
    }

    oldContent := string(content)
    newContent := strings.Replace(oldContent, editFileInput.OldStr, editFileInput.NewStr, -1)

    if oldContent == newContent &amp;&amp; editFileInput.OldStr != "" {
        return "", fmt.Errorf("old_str not found in file")
    }

    err = os.WriteFile(editFileInput.Path, []byte(newContent), 0644)
    if err != nil {
        return "", err
    }

    return "OK", nil
}
</code></pre>
<p>å®ƒæ£€æŸ¥è¾“å…¥å‚æ•°ï¼Œè¯»å–æ–‡ä»¶ï¼ˆæˆ–è€…å¦‚æœå­˜åœ¨å°±åˆ›å»ºå®ƒï¼‰ï¼Œç”¨<code>NewStr</code>æ›¿æ¢<code>OldStr</code>ã€‚ç„¶åå®ƒå°†å†…å®¹å†™å›ç£ç›˜å¹¶è¿”å›â€œOKâ€œã€‚</p>
<p>ä»ç„¶ç¼ºå°‘çš„æ˜¯<code>createNewFile</code>ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå°çš„è¾…åŠ©å‡½æ•°ï¼Œå¦‚æœè¿™ä¸æ˜¯Goçš„è¯ä¼šçŸ­70%ï¼š</p>
<pre><code class="language-go">func createNewFile(filePath, content string) (string, error) {
    dir := path.Dir(filePath)
    if dir != "." {
        err := os.MkdirAll(dir, 0755)
        if err != nil {
            return "", fmt.Errorf("failed to create directory: %w", err)
        }
    }

    err := os.WriteFile(filePath, []byte(content), 0644)
    if err != nil {
        return "", fmt.Errorf("failed to create file: %w", err)
    }

    return fmt.Sprintf("Successfully created file %s", filePath), nil
}
</code></pre>
<p>æœ€åä¸€æ­¥ï¼šå°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬å‘é€ç»™Claudeçš„å·¥å…·åˆ—è¡¨ä¸­ã€‚</p>
<pre><code class="language-go">// main.go
func main() {
    // [... ä¹‹å‰çš„ä»£ç  ...]
    tools := []ToolDefinition{ReadFileDefinition, ListFilesDefinition, EditFileDefinition}
    // [... ä¹‹å‰çš„ä»£ç  ...]
}
</code></pre>
<p>ç„¶åâ€¦æˆ‘ä»¬å‡†å¤‡å¥½äº†ï¼Œä½†ä½ å‡†å¤‡å¥½äº†å—ï¼Ÿä½ å‡†å¤‡å¥½é‡Šæ”¾å®ƒäº†å—ï¼Ÿ</p>
<p>æˆ‘æƒ³æ˜¯çš„ï¼Œè®©æˆ‘ä»¬è¿™æ ·åšã€‚è®©æˆ‘ä»¬å‘Šè¯‰Claudeç”¨JavaScriptåˆ›å»ºä¸€ä¸ªæ–°çš„FizzBuzzå‡½æ•°ã€‚</p>
<p>å¯¹å§ï¼Ÿï¼è¿™å¾ˆä»¤äººå°è±¡æ·±åˆ»ï¼Œä¸æ˜¯å—ï¼Ÿè¿™æ˜¯ä½ å¯èƒ½æƒ³å‡ºçš„<code>edit_file</code>â€”â€”é€šå¸¸æ˜¯ä»£ç†ç¨‹åºâ€”â€”æœ€åŸºæœ¬çš„å®ç°ã€‚</p>
<p>ä½†æ˜¯ï¼Œå®ƒæœ‰æ•ˆå—ï¼Ÿæ˜¯çš„ï¼Œå®ƒæœ‰æ•ˆï¼š</p>
<pre><code class="language-bash">$ node fizzbuzz.js
Running FizzBuzz:
1
2
Fizz
4
Buzz
Fizz
7
8
Fizz
Buzz
11
Fizz
13
14
FizzBuzz
16
[...]
</code></pre>
<p>å¤ªæ£’äº†ã€‚ä½†æ˜¯å˜¿ï¼Œè®©å®ƒå®é™…ç¼–è¾‘ä¸€ä¸ªæ–‡ä»¶è€Œä¸åªæ˜¯åˆ›å»ºä¸€ä¸ªã€‚</p>
<p>å½“æˆ‘è¦æ±‚â€œè¯·ç¼–è¾‘fizzbuzz.jsï¼Œä½¿å…¶åªæ‰“å°åˆ°15â€œæ—¶ï¼ŒClaudeçš„åšæ³•å¦‚ä¸‹ï¼š</p>
<p>å®ƒè¯»å–æ–‡ä»¶ï¼Œç¼–è¾‘æ–‡ä»¶ä»¥æ›´æ”¹è¿è¡Œæ—¶é•¿ï¼Œç„¶åè¿˜ç¼–è¾‘æ–‡ä»¶ä»¥æ›´æ–°é¡¶éƒ¨çš„æ³¨é‡Šã€‚</p>
<p>å®ƒä»ç„¶æœ‰æ•ˆï¼š</p>
<pre><code class="language-bash">$ node fizzbuzz.js
Running FizzBuzz:
1
2
Fizz
4
Buzz
Fizz
7
8
Fizz
Buzz
11
Fizz
13
14
FizzBuzz
</code></pre>
<p>å¥½çš„ï¼Œè®©æˆ‘ä»¬å†åšä¸€ä¸ªï¼Œè®©å®ƒåšä»¥ä¸‹äº‹æƒ…ï¼š</p>
<p>åˆ›å»ºä¸€ä¸ªcongrats.jsè„šæœ¬ï¼Œrot13è§£ç ä»¥ä¸‹å­—ç¬¦ä¸²â€™Pbatenghyngvbaf ba ohvyqvat n pbqr-rqvgvat ntrag!â€™å¹¶æ‰“å°å®ƒ</p>
<p>ä¹Ÿè®¸æ˜¯ä¸€ä¸ªå¾ˆé«˜çš„è¦æ±‚ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ï¼š</p>
<p>å®ƒæœ‰æ•ˆå—ï¼Ÿè®©æˆ‘ä»¬è¯•è¯•ï¼š</p>
<pre><code class="language-bash">$ node congrats.js
Congratulations on building a code-editing agent!
</code></pre>
<p>å®ƒæœ‰æ•ˆï¼</p>
<p>è¿™ä¸æ˜¯å¾ˆç¥å¥‡å—ï¼Ÿ</p>
<p>å¦‚æœä½ å’Œæˆ‘åœ¨è¿‡å»å‡ ä¸ªæœˆä¸­äº¤è°ˆè¿‡çš„æ‰€æœ‰å·¥ç¨‹å¸ˆä¸€æ ·ï¼Œåœ¨é˜…è¯»è¿™ç¯‡æ–‡ç« æ—¶ï¼Œä½ å¾ˆå¯èƒ½ä¸€ç›´åœ¨ç­‰å¾…å…”å­ä»å¸½å­é‡Œè¢«æ‹‰å‡ºæ¥ï¼Œç­‰å¾…æˆ‘è¯´â€œå¥½å§ï¼Œå®é™…ä¸Šè¿™æ¯”è¿™éš¾å¾—å¤šå¾—å¤šã€‚â€œä½†å®ƒä¸æ˜¯ã€‚</p>
<p>è¿™æœ¬è´¨ä¸Šå°±æ˜¯ä»£ç ç¼–è¾‘ä»£ç†ç¨‹åºå†…éƒ¨å¾ªç¯çš„å…¨éƒ¨å†…å®¹ã€‚å½“ç„¶ï¼Œå°†å…¶é›†æˆåˆ°ä½ çš„ç¼–è¾‘å™¨ä¸­ï¼Œè°ƒæ•´ç³»ç»Ÿæç¤ºï¼Œåœ¨é€‚å½“çš„æ—¶é—´ç»™å®ƒé€‚å½“çš„åé¦ˆï¼Œå›´ç»•å®ƒçš„æ¼‚äº®UIï¼Œå›´ç»•å·¥å…·çš„æ›´å¥½å·¥å…·ï¼Œå¯¹å¤šä¸ªä»£ç†ç¨‹åºçš„æ”¯æŒç­‰ç­‰â€”â€”æˆ‘ä»¬åœ¨Ampä¸­æ„å»ºäº†æ‰€æœ‰è¿™äº›ï¼Œä½†å®ƒä¸éœ€è¦å¤©æ‰çš„æ—¶åˆ»ã€‚æ‰€éœ€è¦çš„åªæ˜¯å®ç”¨çš„å·¥ç¨‹å’Œè‹¦å·¥ã€‚</p>
<p>è¿™äº›æ¨¡å‹ç°åœ¨éå¸¸å¼ºå¤§ã€‚300è¡Œä»£ç å’Œä¸‰ä¸ªå·¥å…·ï¼Œç°åœ¨ä½ å¯ä»¥ä¸ç¼–è¾‘ä½ ä»£ç çš„å¤–æ˜Ÿæ™ºèƒ½å¯¹è¯ã€‚å¦‚æœä½ è®¤ä¸ºâ€œå¥½å§ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰çœŸæ­£â€¦â€œâ€”â€”å»è¯•è¯•å§ï¼å»çœ‹çœ‹ä½ èƒ½ç”¨è¿™ä¸ªèµ°å¤šè¿œã€‚æˆ‘æ‰“èµŒæ¯”ä½ æƒ³è±¡çš„è¦è¿œå¾—å¤šã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è®¤ä¸ºä¸€åˆ‡éƒ½åœ¨æ”¹å˜ã€‚</p>

    </div>

    <footer class="post-footer">
        <div class="post-info">
            <p><strong>Storage ID:</strong> <code>QmZx8psFhFU9imDvGaMJTfMiiDoWohBEdVYwSvNhQqDHDW</code></p>
            
            <p><strong>IPFS Link:</strong> <a href="https:&#x2F;&#x2F;ipfs.io&#x2F;ipfs&#x2F;QmZx8psFhFU9imDvGaMJTfMiiDoWohBEdVYwSvNhQqDHDW" target="_blank">View on IPFS</a></p>
            
            <p><strong>Content Hash:</strong> <code>6fdf7af424d11c25f0d8b11b7a5a87bc1152e90346f508fcb7d89816ad8a727a</code></p>
        </div>
        <nav class="post-nav">
            <a href="/archive.html">â† Back to Archive</a>
        </nav>
    </footer>

    
    <!-- Related Posts -->
    <section class="related-posts">
        <h2>Related Posts</h2>
        <div class="related-posts-grid">
            
            <article class="related-post-card">
                <h3><a href="&#x2F;kpgb&#x2F;posts&#x2F;auto-excerpt-test.html">Auto Excerpt Test</a></h3>
                <div class="post-meta">
                    <span class="date">2025-07-21</span>
                    
                    <span class="reading-time">2 min read</span>
                    
                </div>
                
                    <p class="excerpt">This post demonstrates the new automatic excerpt generation feature in KPGB. The excerpt should be generated from the first paragraph of the content, â€¦</p>
                
                
                <div class="tags-mini">
                    
                    <span class="tag-mini">features</span>
                    
                    <span class="tag-mini">test</span>
                    
                </div>
                
            </article>
            
            <article class="related-post-card">
                <h3><a href="&#x2F;kpgb&#x2F;posts&#x2F;tag-system-demo-post.html">Tag System Demo Post</a></h3>
                <div class="post-meta">
                    <span class="date">2025-07-21</span>
                    
                    <span class="reading-time">1 min read</span>
                    
                </div>
                
                    <p class="excerpt">Demonstrating the new tag system in KPGB</p>
                
                
                <div class="tags-mini">
                    
                    <span class="tag-mini">rust</span>
                    
                    <span class="tag-mini">ipfs</span>
                    
                    <span class="tag-mini">blog</span>
                    
                </div>
                
            </article>
            
            <article class="related-post-card">
                <h3><a href="&#x2F;kpgb&#x2F;posts&#x2F;ipfs.html">IPFSå›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ æµ‹è¯•</a></h3>
                <div class="post-meta">
                    <span class="date">2025-07-23</span>
                    
                    <span class="reading-time">2 min read</span>
                    
                </div>
                
                    <p class="excerpt">è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•IPFSå›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ åŠŸèƒ½çš„æ–‡ç« ã€‚ å½“ä½ åœ¨æ–‡ç« ä¸­ä½¿ç”¨æœ¬åœ°å›¾ç‰‡æ—¶ï¼ŒKPGBä¼šè‡ªåŠ¨ï¼š æ£€æµ‹æ–‡ç« ä¸­çš„æœ¬åœ°å›¾ç‰‡è·¯å¾„ å°†å›¾ç‰‡ä¸Šä¼ åˆ°IPFS å°†æœ¬åœ°è·¯å¾„æ›¿æ¢ä¸ºIPFSé“¾æ¥ ä¿æŒå›¾ç‰‡çš„altæ–‡æœ¬ä¸å˜ ä¸‹é¢æ˜¯ä¸€ä¸ªæµ‹è¯•å›¾ç‰‡ï¼ˆéœ€è¦ä½ åœ¨ç›¸åŒç›®å½•ä¸‹æ”¾ç½®ä¸€ä¸ª test.png æ–‡ä»¶ï¼‰ï¼š æµ‹è¯•å›¾ç‰‡ ä¹Ÿæ”¯æŒç›¸å¯¹è·¯å¾„ï¼š â€¦</p>
                
                
                <div class="tags-mini">
                    
                    <span class="tag-mini">æµ‹è¯•</span>
                    
                    <span class="tag-mini">IPFS</span>
                    
                    <span class="tag-mini">å›¾ç‰‡</span>
                    
                </div>
                
            </article>
            
            <article class="related-post-card">
                <h3><a href="&#x2F;kpgb&#x2F;posts&#x2F;chanzhe.html">ç¦…è€…çš„åˆå¿ƒğŸ“’</a></h3>
                <div class="post-meta">
                    <span class="date">2025-07-23</span>
                    
                    <span class="reading-time">1 min read</span>
                    
                </div>
                
                    <p class="excerpt">æ˜¯æ™ºæ…§åœ¨è¿½å¯»æ™ºæ…§ã€‚ åˆå­¦è€…çš„å¿ƒæ˜¯å¼€æ”¾çš„ï¼Œè€Œè¡Œå®¶çš„å¿ƒæ˜¯æ”¶ç´§çš„ã€‚ æˆ‘ä»¬çš„æœ¬å¿ƒå†…å«ä¸‡ç‰©ï¼Œå®ƒæœ¬è‡ªå…·è¶³ã€‚ å¦‚æœä½ çš„å¿ƒæ˜¯ç©ºçš„ï¼Œå®ƒå¯ä»¥éšæ—¶æ¥å—ä»»ä½•äº‹ç‰©ï¼›å®ƒå‘æ‰€æœ‰çš„äº‹ç‰©å¼€æ”¾ã€‚åˆå­¦è€…çš„å¿ƒæ˜¯å¼€æ”¾çš„ï¼Œè€Œè¡Œå®¶çš„å¿ƒæ˜¯æ”¶ç´§çš„ã€‚ åˆ†åˆ«å¿ƒå¤ªé‡ï¼Œæ˜¯è‡ªæˆ‘æŸç¼šã€‚å¤ªè¿‡è‹›åˆ»å’Œè´ªå©ªï¼Œä½ çš„å¿ƒä¾¿ä¸ä¼šä¸°é¥¶å¯Œè¶³ã€‚è€Œå¤±å»äº†æœ¬è‡ªå…·è¶³çš„å¿ƒï¼Œæˆ‘ä»¬ä¼šå¤±å®ˆæ‰€æœ‰çš„â€¦</p>
                
                
            </article>
            
            <article class="related-post-card">
                <h3><a href="&#x2F;kpgb&#x2F;posts&#x2F;T.html">TingHuè¯­å½•ğŸ“’</a></h3>
                <div class="post-meta">
                    <span class="date">2025-07-23</span>
                    
                    <span class="reading-time">4 min read</span>
                    
                </div>
                
                    <p class="excerpt">å¤§å¤šæ•°äººæœ€åè·‘ä¸èµ¢æ¯”ç‰¹å¸è¿™å¥è¯æˆ‘éƒ½ä¸çŸ¥é“è®²äº†å¤šå°‘æ¬¡äº†(å®é™…ä¸Šæœ€åå¾ˆå¤šäººè¿˜äºé’±)ã€‚ å¦‚æœä½ æŒ‡æœ›æˆ‘é€šè¿‡æ¨èä½ ä¹°å°å±±å¯¨è·‘èµ¢æ¯”ç‰¹å¸ï¼Œé‚£è¿˜æ˜¯åˆ«å…³æ³¨æˆ‘äº†ï¼Œæˆ‘æ²¡æœ‰åŠæ³•ç»™å‡ºæˆ‘è®¤ä¸ºåˆç†çš„å»ºè®®ã€‚ ç°åœ¨è¯´ä¹Ÿè®¸è¿˜æ—©ï¼Œä½†æ˜¯å¤§å®¶å¯ä»¥è®°ä½è¿™ä¸€æ¡ï¼Œå¹´åº•ç­›é€‰æŠ•èµ„æ ‡çš„çš„æ—¶å€™ï¼Œ 2019-2021è¿™è½®ç‰›å¸‚è¡¨ç°ä¸€èˆ¬çš„è€å¸ï¼Œå…¨éƒ¨ä¸ä½œä¸ºç›®æ ‡ï¼Œâ€¦</p>
                
                
            </article>
            
        </div>
    </section>
    

    
    <!-- Giscus Comments -->
    <div class="comments">
        <h2>Comments</h2>
        <script src="https://giscus.app/client.js"
                data-repo="davirain-su&#x2F;kpgb"
                data-repo-id="R_kgDOPP4-yg"
                data-category="General"
                data-category-id="DIC_kwDOPP4-ys4CtTKw"
                data-mapping="pathname"
                data-strict="0"
                data-reactions-enabled="1"
                data-emit-metadata="0"
                data-input-position="bottom"
                data-theme="preferred_color_scheme"
                data-lang="zh-CN"
                data-loading="lazy"
                crossorigin="anonymous"
                async>
        </script>
    </div>
    
</article>

        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Anonymous. Powered by IPFS & KPGB.</p>
            <p>A decentralized blog powered by IPFS</p>
        </div>
    </footer>
</body>
</html>