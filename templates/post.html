{% extends "base.html" %}

{% block content %}
<article class="post">
    <header>
        <h1>{{ post.title }}</h1>
        <div class="post-meta">
            <span class="author">By {{ post.author }}</span>
            <span class="date">{{ post.created_at | date(format="%Y-%m-%d %H:%M") }}</span>
            {% if reading_time %}
            <span class="reading-time">⏱️ {{ reading_time }}</span>
            {% endif %}
            {% if post.category %}
            <span class="category">{{ post.category }}</span>
            {% endif %}
        </div>
        {% if post.tags %}
        <div class="tags">
            {% for tag in post.tags %}
            <a href="{{ site.base_path | default(value="") }}/tags/{{ tag | url_safe_tag }}" class="tag">{{ tag }}</a>
            {% endfor %}
        </div>
        {% endif %}
    </header>

    <div class="post-content">
        {{ content_html | safe }}
    </div>

    <footer class="post-footer">
        <div class="post-info">
            <p><strong>Storage ID:</strong> <code>{{ storage_id }}</code></p>
            {% if ipfs_link %}
            <p><strong>IPFS Link:</strong> <a href="{{ ipfs_link }}" target="_blank">View on IPFS</a></p>
            {% endif %}
            <p><strong>Content Hash:</strong> <code>{{ post.content_hash }}</code></p>
        </div>
        <nav class="post-nav">
            <a href="/archive.html">← Back to Archive</a>
        </nav>
    </footer>

    {% if site.giscus.enabled and site.giscus.repo_id != "" %}
    <!-- Giscus Comments -->
    <div class="comments">
        <h2>Comments</h2>
        <script src="https://giscus.app/client.js"
                data-repo="{{ site.giscus.repo }}"
                data-repo-id="{{ site.giscus.repo_id }}"
                data-category="{{ site.giscus.category }}"
                data-category-id="{{ site.giscus.category_id }}"
                data-mapping="{{ site.giscus.mapping }}"
                data-strict="0"
                data-reactions-enabled="{% if site.giscus.reactions_enabled %}1{% else %}0{% endif %}"
                data-emit-metadata="{% if site.giscus.emit_metadata %}1{% else %}0{% endif %}"
                data-input-position="{{ site.giscus.input_position }}"
                data-theme="{{ site.giscus.theme }}"
                data-lang="{{ site.giscus.lang }}"
                data-loading="lazy"
                crossorigin="anonymous"
                async>
        </script>
    </div>
    {% endif %}
</article>
{% endblock content %}